variables:
  DOCKER_DRIVER: overlay2

stages:
  - test

run_tests:
  stage: test
  image: node:10-alpine
  services:
    - mongo:latest
  variables:
    MONGO_URI: "mongodb://mongo/ongoingness"
    SECRET: "thisismyappsecret"
    DEBUG: "true"
    TEST: "true"
  tags:
    - docker
  script:
    - npm ci
    - npm install -g typescript
    - tsc
    - npm test
